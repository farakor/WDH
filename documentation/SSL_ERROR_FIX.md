# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è SSL –æ—à–∏–±–æ–∫

## üìã –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ SSL –æ—à–∏–±–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å—Ç–µ–∫—à–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –∫—Ä–∞—Å–Ω—ã–π badge —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—à–∏–±–∫–æ–π. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å "–û—à–∏–±–∫–∞" –±–µ–∑ —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å SSL.

## üéØ –ü—Ä–∏—á–∏–Ω–∞

–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –æ—à–∏–±–∫–∞ SSL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∫–æ–¥ –ø–æ–ø–∞–¥–∞–ª –≤ –±–ª–æ–∫ `catch` –≤ `monitoring.service.ts`, –≥–¥–µ:

- –í—Å–µ SSL –ø–æ–ª—è (`sslValid`, `sslExpiresAt`, –∏ —Ç.–¥.) —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å –≤ `null`
- `errorMessage` —Å–æ–¥–µ—Ä–∂–∞–ª —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ "SSL:"
- Frontend –Ω–µ –º–æ–≥ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ —ç—Ç–æ SSL –æ—à–∏–±–∫–∞, –∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª badge

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### Backend (`monitoring.service.ts`)

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è SSL –æ—à–∏–±–æ–∫ –≤ –±–ª–æ–∫–µ `catch`:

```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ—à–∏–±–∫–∞ SSL-—Å–≤—è–∑–∞–Ω–Ω–æ–π
const sslErrorCodes = [
  "CERT_HAS_EXPIRED",
  "DEPTH_ZERO_SELF_SIGNED_CERT",
  "SELF_SIGNED_CERT_IN_CHAIN",
  "UNABLE_TO_VERIFY_LEAF_SIGNATURE",
  "UNABLE_TO_GET_ISSUER_CERT",
  "UNABLE_TO_GET_ISSUER_CERT_LOCALLY",
  "ERR_TLS_CERT_ALTNAME_INVALID",
];

const isSSLError =
  sslErrorCodes.includes(errorCode) ||
  errorMessage.toLowerCase().includes("certificate") ||
  errorMessage.toLowerCase().includes("ssl") ||
  errorMessage.toLowerCase().includes("tls");
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ SSL –æ—à–∏–±–∫–∞—Ö:

- `sslValid` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `false` (–≤–º–µ—Å—Ç–æ `null`)
- `errorMessage` —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º "SSL:" –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –æ—à–∏–±–∫–∏

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏:

| –ö–æ–¥ –æ—à–∏–±–∫–∏                     | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç                        |
| ------------------------------ | ----------------------------------------- |
| `CERT_HAS_EXPIRED`             | üî¥ **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å—Ç–µ–∫**                   |
| `DEPTH_ZERO_SELF_SIGNED_CERT`  | üî¥ **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π**           |
| `ERR_TLS_CERT_ALTNAME_INVALID` | üî¥ **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–º–µ–Ω—É** |
| –î—Ä—É–≥–∏–µ —Å "certificate"         | üî¥ **–ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º**            |
| –î—Ä—É–≥–∏–µ SSL/TLS                 | üî¥ **SSL –æ—à–∏–±–∫–∞**                         |

### Frontend

Frontend —É–∂–µ –±—ã–ª –≥–æ—Ç–æ–≤ –∫ —ç—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º:

```typescript
// DashboardPage.tsx –∏ WebsitesPage.tsx
const getSSLErrorText = (errorMessage: string | undefined): string => {
  if (!errorMessage) return "SSL –ü—Ä–æ–±–ª–µ–º–∞";

  const sslErrorMatch = errorMessage.match(/SSL:\s*(.+?)(?:;|$)/);
  if (sslErrorMatch && sslErrorMatch[1]) {
    return sslErrorMatch[1].trim();
  }

  return "SSL –ü—Ä–æ–±–ª–µ–º–∞";
};
```

–£—Å–ª–æ–≤–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```typescript
{
  (lastCheck?.sslValid === false ||
    (lastCheck?.errorMessage && lastCheck.errorMessage.includes("SSL"))) && (
    <span className="bg-red-100 text-red-800">
      <ShieldAlert />
      <span>{getSSLErrorText(lastCheck?.errorMessage)}</span>
    </span>
  );
}
```

## üé® –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```
remont-kofe-spb.ru    ‚óè –û—à–∏–±–∫–∞    631ms
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```
remont-kofe-spb.ru    ‚óè –û—à–∏–±–∫–∞    üî¥ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å—Ç–µ–∫    631ms
```

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `SSL_CHECK.md`:

- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å —Ç–∏–ø–∞–º–∏ SSL –æ—à–∏–±–æ–∫ –∏ –∏—Ö –∫–æ–¥–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ catch –±–ª–æ–∫–µ
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. **Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è nodemon/watch mode)
2. **Frontend –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω dev-—Å–µ—Ä–≤–µ—Ä)
3. –ù–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–∞ –ø–æ–∫–∞–∂–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é SSL –æ—à–∏–±–∫—É

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã SSL –ø—Ä–æ–±–ª–µ–º:

- ‚úÖ –ò—Å—Ç–µ–∫—à–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- ‚úÖ –°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ—Ç –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö CA
- ‚úÖ –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–æ–º–µ–Ω–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Å —Ü–µ–ø–æ—á–∫–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ SSL/TLS –æ—à–∏–±–∫–∏

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 05.10.2025  
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã:**

- `backend/src/services/monitoring.service.ts`
- `frontend/src/pages/DashboardPage.tsx` (—É–∂–µ –≥–æ—Ç–æ–≤)
- `frontend/src/pages/WebsitesPage.tsx` (—É–∂–µ –≥–æ—Ç–æ–≤)
- `SSL_CHECK.md`
